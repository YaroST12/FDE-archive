#!/system/bin/sh
### FDE.AI | FeraVolt. 2020 ###
while true;do BOOT=$(getprop sys.boot_completed);if [ "$BOOT" -eq "1" ];then sleep 18;break;else sleep 9;fi;done;if [ -d /sbin/.magisk/img/FDE ];then SYSFD=/sbin/.magisk/img/FDE/system;else SYSFD=/system;fi;killall -q module >/dev/null 2>&1;rm -Rf /dev/fdeai >/dev/null 2>&1;mkdir /dev/fdeai;chmod -R 755 /dev/fdeai;A=$(getprop ro.product.cpu.abi);if [ "$A" = "$(echo "$A"|grep "arm64")" ];then cp -f $SYSFD/etc/fde.ai/module64 /dev/fdeai/module;rm -Rf $SYSFD/etc/fde.ai/module32;rm -Rf $SYSFD/etc/fde.ai/module86;elif [ "$A" = "$(echo "$A"|grep "armeabi")" ];then cp -f $SYSFD/etc/fde.ai/module32 /dev/fdeai/module;rm -Rf $SYSFD/etc/fde.ai/module64;rm -Rf $SYSFD/etc/fde.ai/module86;elif [ "$A" = "$(echo "$A"|grep "x86_64")" ];then cp -f $SYSFD/etc/fde.ai/module86 /dev/fdeai/module;rm -Rf $SYSFD/etc/fde.ai/module64;rm -Rf $SYSFD/etc/fde.ai/module32;else cp -f $SYSFD/etc/fde.ai/module32 /dev/fdeai/module;rm -Rf $SYSFD/etc/fde.ai/module64;rm -Rf $SYSFD/etc/fde.ai/module86;fi;chmod 755 /dev/fdeai/module;chcon u:object_r:system_file:s0 /dev/fdeai/module;
/dev/fdeai/module >/dev/null 2>&1 &
sleep 180;echo "FDE" > /sys/power/wake_unlock;
